#include <iostream>
#include <iomanip>
#include <string>
#include <vector>
#include <cctype>
#include <cmath>

using namespace std;

// ==================== 实验任务一相关函数 ====================
struct Student {
    string name;
    double chinese;
    double math;
    double english;
    double average;
};

void task1() {
    cout << "\n"<< "实验任务一：学生成绩管理系统" << endl;
    
    int n;
    cout << "请输入学生人数: ";
    cin >> n;
    
    vector<Student> students(n);
    
    // 输入学生信息
    for (int i = 0; i < n; i++) {
        cout << "请输入第" << i + 1 << "个学生的信息(姓名 语文 数学 英语): ";
        cin >> students[i].name >> students[i].chinese >> students[i].math >> students[i].english;
        
        // 计算平均分
        students[i].average = (students[i].chinese + students[i].math + students[i].english) / 3.0;
    }
    
    // 输出成绩表
    cout << "\n学生成绩信息表:" << endl;
    cout << "-------------------------------------------------" << endl;
    cout << left << setw(12) << "姓名" 
         << setw(8) << "语文" 
         << setw(8) << "数学" 
         << setw(8) << "英语" 
         << setw(10) << "平均分" 
         << "备注" << endl;
    cout << "-------------------------------------------------" << endl;
    
    for (const auto& student : students) {
        cout << left << setw(12) << student.name
             << setw(8) << fixed << setprecision(1) << student.chinese
             << setw(8) << student.math
             << setw(8) << student.english
             << setw(10) << fixed << setprecision(2) << student.average;
        
        if (student.average >= 90) {
            cout << "Excellent";
        }
        cout << endl;
    }
}

// ==================== 实验任务二相关函数 ====================
int countVowels(const char* p) {
    int count = 0;
    while (*p != '\0') {
        char ch = tolower(*p);
        if (ch == 'a' || ch == 'e' || ch == 'i' || ch == 'o' || ch == 'u') {
            count++;
        }
        p++;
    }
    return count;
}

void task2() {
    cout << "\n"<< "实验任务二：元音字母统计" << endl;
    
    cin.ignore(); // 清除输入缓冲区
    const int MAX_LENGTH = 100;
    char str[MAX_LENGTH];
    
    cout << "请输入一个字符串: ";
    cin.getline(str, MAX_LENGTH);
    
    int vowelCount = countVowels(str);
    cout << "字符串中元音字母的个数为: " << vowelCount << endl;
}

// ==================== 实验任务三相关函数 ====================
inline double square(double x) {
    return x * x;
}

double power(double base, int exponent = 2) {
    return pow(base, exponent);
}

double calc(double a, double b, char op) {
    switch (op) {
        case '+':
            return a + b;
        case '-':
            return a - b;
        case '*':
            return a * b;
        case '/':
            if (b == 0) {
                cout << "Error: divide by zero" << endl;
                return 0;
            }
            return a / b;
        default:
            cout << "Error: invalid operator" << endl;
            return 0;
    }
}

double calc(int a, int b, char op) {
    return calc(static_cast<double>(a), static_cast<double>(b), op);
}

void task3() {
    cout << "\n"<< "实验任务三：多功能计算器" << endl;
    
    double num1, num2;
    char op;
    
    cout << "请输入两个操作数和一个运算符(例如: 5 3 +): ";
    cin >> num1 >> num2 >> op;
    
    // 调用各个函数
    double sq1 = square(num1);
    double sq2 = square(num2);
    double pow1 = power(num1);
    double pow2 = power(num2);
    double result = calc(num1, num2, op);
    
    // 输出结果
    cout << fixed << setprecision(2);
    cout << "\n计算结果:" << endl;
    cout << num1 << " 的平方: " << sq1 << endl;
    cout << num2 << " 的平方: " << sq2 << endl;
    cout << num1 << " 的" << ((op == '+' || op == '-') ? "平方" : "2次幂") << ": " << pow1 << endl;
    cout << num2 << " 的" << ((op == '+' || op == '-') ? "平方" : "2次幂") << ": " << pow2 << endl;
    cout << num1 << " " << op << " " << num2 << " = " << result << endl;
}

// ==================== 实验任务四相关函数 ====================
void swap(int& x, int& y) {
    int temp = x;
    x = y;
    y = temp;
}

void swap(int* x, int* y) {
    int temp = *x;
    *x = *y;
    *y = temp;
}

void task4() {
    cout << "\n"<< "实验任务四：交换函数实现" << endl;
    
    int a, b;
    
    cout << "请输入两个整数: ";
    cin >> a >> b;
    
    cout << "交换前: a = " << a << ", b = " << b << endl;
    
    // 使用引用版本的swap
    int a1 = a, b1 = b;
    swap(a1, b1);
    cout << "使用引用交换后: a = " << a1 << ", b = " << b1 << endl;
    
    // 使用指针版本的swap
    int a2 = a, b2 = b;
    swap(&a2, &b2);
    cout << "使用指针交换后: a = " << a2 << ", b = " << b2 << endl;
}

// ==================== 主函数 ====================
int main() {
    task1();
    task2();
    task3();
    task4();
    return 0;
}
